{"ast":null,"code":"// /api/new-meetup\n// server-side code\n// method POST\nimport { connectDatabase, insertDocument } from '../../helpers/db-util';\n\nasync function handler(req, res) {\n  if (req.method === 'POST') {\n    const data = req.body;\n    let client;\n\n    try {\n      client = await connectDatabase();\n    } catch (error) {\n      res.status(500).json({\n        message: 'Connecting to the database failed!'\n      });\n      return;\n    }\n\n    try {\n      await insertDocument(client, 'meetups', data);\n      client.close();\n    } catch (error) {\n      res.status(500).json({\n        message: 'Inserting meetup failed!'\n      });\n      return;\n    }\n\n    res.status(201).json({\n      message: 'Meetup inserted!'\n    });\n  }\n}\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}